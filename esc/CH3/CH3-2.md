# 3.2 프로세스는 메모리 안에서 어떤 모습을 하고 있을까?

모든 프로세스 주소 공간에는 코드 영역, 데이터 영역, 힙 영역, 스택 영역이 있다.
- 코드 영역, 데이터 영역: 실행 파일을 초기화할 때 생성되는 영역
- 힙 영역: 동적 메모리 할당에 사용
- 스택 영역: 함수 호출에 사용되며 매개변수, 반환 주소, 레지스터 정보 등을 포함한 함수 실행 시 정보를 저장하는 데 사용

## 3.2.1 가상 메모리: 눈에 보이는 것이 항상 실제와 같지는 않다

모든 프로세스의 코드 영역은 `0x400000`에서 시작한다.<br>
그렇다면 서로 다른 프로세스 두 개가 메모리를 할당하기 위해 `malloc` 함수를 호출하면 동일한 시작 주소를 반환하면 동일한 주소에 데이터를 쓴다고 생각할 수 있다.<br>
하지만 해당 메모리 주소는 가상 메모리 주소이며, 이 주소는 메모리에 조작이 일어나기 전에 실제 메모리 주소로 변환되므로 문제가 발생하지 않는다.<br><br>

여기서 두 가지 사항에 주목할 필요가 있다.
1. 프로세스는 동일한 크기의 조각(chunk)로 나뉘어 물리 메모리에 저장된다.
2. 모든 조각은 물리 메모리 전체에 무작위로 흩어져 있다.<br>
가상 메모리와 물리 메모리 사이의 사상(mapping) 관계를 유지하여 균일한 가상의 주소 공간을 제공한다.<br>
이것이 **페이지 테이블**이 존재하는 이유이다.<br>

## 3.2.2 페이지와 페이지 테이블: 가상에서 현실로

가상 메모리 주소와 물리 메모리 주소의 사상 관계가 유지되는 한 프로세스 주소 공간의 데이터가 실제 물리 메모리의 어디에 저장되는지는 전혀 신경 쓸 필요가 없다.<br>
이런 사상 관계를 유지하는 것을 페이지 테이블이라고 하며, 각각의 프로세스에는 단 하나의 페이지 테이블만 있어야 한다.<br>
또한 프로세스의 주소 공간을 동일한 크기의 조각으로 나누고, 이 조각을 **페이지**라고 부른다.<br>